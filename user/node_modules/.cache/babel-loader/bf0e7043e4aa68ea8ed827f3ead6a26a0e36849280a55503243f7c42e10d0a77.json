{"ast":null,"code":"var _jsxFileName = \"C:\\\\Insta\\\\user\\\\src\\\\scenes\\\\widgets\\\\StatusModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Modal, Box, IconButton, LinearProgress } from '@mui/material';\nimport { Close, ArrowBackIos, ArrowForwardIos } from '@mui/icons-material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StatusModal = ({\n  open,\n  handleClose,\n  imageUrls\n}) => {\n  _s();\n  var _validImages$currentI;\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [progress, setProgress] = useState(0);\n\n  // Filter images that are less than 24 hours old\n  const validImages = imageUrls.filter(image => {\n    const imageDate = new Date(image.date);\n    const currentDate = new Date();\n    const timeDifference = currentDate - imageDate;\n    return timeDifference <= 24 * 60 * 60 * 1000; // 24 hours in milliseconds\n  });\n  useEffect(() => {\n    let timer;\n    let progressTimer;\n    if (open && validImages.length > 0) {\n      timer = setInterval(() => {\n        setCurrentImageIndex(prevIndex => {\n          if (prevIndex < validImages.length - 1) {\n            return prevIndex + 1;\n          } else {\n            handleClose();\n            return prevIndex;\n          }\n        });\n      }, 4000);\n      progressTimer = setInterval(() => {\n        setProgress(prevProgress => prevProgress >= 100 ? 0 : prevProgress + 1);\n      }, 40); // 4000ms / 100 = 40ms per progress increment\n    }\n    return () => {\n      clearInterval(timer);\n      clearInterval(progressTimer);\n      setProgress(0);\n    };\n  }, [open, validImages.length, handleClose]);\n  const handleNext = () => {\n    setCurrentImageIndex(prevIndex => prevIndex < validImages.length - 1 ? prevIndex + 1 : prevIndex);\n    setProgress(0);\n  };\n  const handlePrev = () => {\n    setCurrentImageIndex(prevIndex => prevIndex > 0 ? prevIndex - 1 : prevIndex);\n    setProgress(0);\n  };\n  if (!open || validImages.length === 0) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: open,\n    onClose: handleClose,\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        width: '100vw',\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        sx: {\n          position: 'absolute',\n          top: 16,\n          right: 16,\n          color: 'white'\n        },\n        onClick: handleClose,\n        children: /*#__PURE__*/_jsxDEV(Close, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        sx: {\n          position: 'absolute',\n          top: '50%',\n          left: 16,\n          color: 'white'\n        },\n        onClick: handlePrev,\n        children: /*#__PURE__*/_jsxDEV(ArrowBackIos, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        sx: {\n          position: 'absolute',\n          top: '50%',\n          right: 16,\n          color: 'white'\n        },\n        onClick: handleNext,\n        children: /*#__PURE__*/_jsxDEV(ArrowForwardIos, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        component: \"img\",\n        src: `http://localhost:3001/status/${(_validImages$currentI = validImages[currentImageIndex]) === null || _validImages$currentI === void 0 ? void 0 : _validImages$currentI.media}`,\n        alt: `status ${currentImageIndex}`,\n        sx: {\n          maxHeight: '80%',\n          maxWidth: '80%',\n          height: 'auto',\n          width: 'auto',\n          borderRadius: 2,\n          boxShadow: 24,\n          objectFit: 'cover'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: 'absolute',\n          bottom: 0,\n          left: 0,\n          right: 0,\n          height: 4,\n          backgroundColor: 'rgba(255, 255, 255, 0.3)'\n        },\n        children: /*#__PURE__*/_jsxDEV(LinearProgress, {\n          variant: \"determinate\",\n          value: progress,\n          sx: {\n            height: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n_s(StatusModal, \"dSBPlSQeOjoLI/5tImU1G2n3D/Y=\");\n_c = StatusModal;\nexport default StatusModal;\nvar _c;\n$RefreshReg$(_c, \"StatusModal\");","map":{"version":3,"names":["React","useEffect","useState","Modal","Box","IconButton","LinearProgress","Close","ArrowBackIos","ArrowForwardIos","jsxDEV","_jsxDEV","StatusModal","open","handleClose","imageUrls","_s","_validImages$currentI","currentImageIndex","setCurrentImageIndex","progress","setProgress","validImages","filter","image","imageDate","Date","date","currentDate","timeDifference","timer","progressTimer","length","setInterval","prevIndex","prevProgress","clearInterval","handleNext","handlePrev","onClose","children","sx","display","justifyContent","alignItems","height","width","backgroundColor","position","top","right","color","onClick","fileName","_jsxFileName","lineNumber","columnNumber","left","component","src","media","alt","maxHeight","maxWidth","borderRadius","boxShadow","objectFit","bottom","variant","value","_c","$RefreshReg$"],"sources":["C:/Insta/user/src/scenes/widgets/StatusModal.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Modal, Box, IconButton, LinearProgress } from '@mui/material';\r\nimport { Close, ArrowBackIos, ArrowForwardIos } from '@mui/icons-material';\r\n\r\nconst StatusModal = ({ open, handleClose, imageUrls }) => {\r\n    const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    // Filter images that are less than 24 hours old\r\n    const validImages = imageUrls.filter(image => {\r\n        const imageDate = new Date(image.date);\r\n        const currentDate = new Date();\r\n        const timeDifference = currentDate - imageDate;\r\n        return timeDifference <= 24 * 60 * 60 * 1000; // 24 hours in milliseconds\r\n    });\r\n\r\n    useEffect(() => {\r\n        let timer;\r\n        let progressTimer;\r\n\r\n        if (open && validImages.length > 0) {\r\n            timer = setInterval(() => {\r\n                setCurrentImageIndex((prevIndex) => {\r\n                    if (prevIndex < validImages.length - 1) {\r\n                        return prevIndex + 1;\r\n                    } else {\r\n                        handleClose();\r\n                        return prevIndex;\r\n                    }\r\n                });\r\n            }, 4000);\r\n\r\n            progressTimer = setInterval(() => {\r\n                setProgress((prevProgress) => (prevProgress >= 100 ? 0 : prevProgress + 1));\r\n            }, 40); // 4000ms / 100 = 40ms per progress increment\r\n        }\r\n\r\n        return () => {\r\n            clearInterval(timer);\r\n            clearInterval(progressTimer);\r\n            setProgress(0);\r\n        };\r\n    }, [open, validImages.length, handleClose]);\r\n\r\n    const handleNext = () => {\r\n        setCurrentImageIndex((prevIndex) => (prevIndex < validImages.length - 1 ? prevIndex + 1 : prevIndex));\r\n        setProgress(0);\r\n    };\r\n\r\n    const handlePrev = () => {\r\n        setCurrentImageIndex((prevIndex) => (prevIndex > 0 ? prevIndex - 1 : prevIndex));\r\n        setProgress(0);\r\n    };\r\n\r\n    if (!open || validImages.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Modal open={open} onClose={handleClose}>\r\n            <Box\r\n                sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    height: '100vh',\r\n                    width: '100vw',\r\n                    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n                    position: 'relative'\r\n                }}\r\n            >\r\n                <IconButton\r\n                    sx={{\r\n                        position: 'absolute',\r\n                        top: 16,\r\n                        right: 16,\r\n                        color: 'white'\r\n                    }}\r\n                    onClick={handleClose}\r\n                >\r\n                    <Close />\r\n                </IconButton>\r\n                <IconButton\r\n                    sx={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: 16,\r\n                        color: 'white'\r\n                    }}\r\n                    onClick={handlePrev}\r\n                >\r\n                    <ArrowBackIos />\r\n                </IconButton>\r\n                <IconButton\r\n                    sx={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        right: 16,\r\n                        color: 'white'\r\n                    }}\r\n                    onClick={handleNext}\r\n                >\r\n                    <ArrowForwardIos />\r\n                </IconButton>\r\n                <Box\r\n                    component=\"img\"\r\n                    src={`http://localhost:3001/status/${validImages[currentImageIndex]?.media}`}\r\n                    alt={`status ${currentImageIndex}`}\r\n                    sx={{\r\n                        maxHeight: '80%',\r\n                        maxWidth: '80%',\r\n                        height: 'auto',\r\n                        width: 'auto',\r\n                        borderRadius: 2,\r\n                        boxShadow: 24,\r\n                        objectFit: 'cover'\r\n                    }}\r\n                />\r\n                <Box\r\n                    sx={{\r\n                        position: 'absolute',\r\n                        bottom: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        height: 4,\r\n                        backgroundColor: 'rgba(255, 255, 255, 0.3)'\r\n                    }}\r\n                >\r\n                    <LinearProgress variant=\"determinate\" value={progress} sx={{ height: '100%' }} />\r\n                </Box>\r\n            </Box>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default StatusModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}